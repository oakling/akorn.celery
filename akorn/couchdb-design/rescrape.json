{"_id":"_design/rescrape","_rev":"9-e34b8ceac3f33d9129667fa84eaf1f75","views":{"scraper_total_docs":{"map":"function(doc) {\n  if(doc.scraper_module) {\n    emit(doc.scraper_module, 1);\n  } else {\n    emit(\"Scraper Module Missing\", 1);\n  }\n}","reduce":"function(keys, values, rereduce) {\n  return sum(values);\n}"},"scraper_exception_error_count":{"map":"function(doc) {\n  if(doc.rescrape && doc.scraper_module && doc.exception) {\n    emit([doc.scraper_module, doc.exception], 1);\n  } else if (doc.rescrape && doc.scraper_module) {\n    emit([doc.scraper_module, \"Exception Details Missing\"], 1);\n  } else if (doc.rescrape && doc.exception) {\n    emit([\"Scraper Module Missing\", doc.exception], 1);\n  } else if (doc.rescrape) {\n    emit([\"Scraper Module Missing\", \"Exception Details Missing\"], 1);\n  }\n}","reduce":"function(keys, values, rereduce) {\n  return sum(values);\n}"},"scraper_exception_errors":{"map":"function(doc) {\n  if(doc.rescrape) {\n    var scraper_module;\n    var exception;\n    var source_urls;\n\n    if(doc.scraper_module) {\n      scraper_module = doc.scraper_module;\n    } else {\n      scraper_module = \"Scraper Module Missing\";\n    }\n    if (doc.exception) {\n      exception = doc.exception;\n    } else if (doc.error) {\n      exception = doc.error;\n    } else {\n      exception = \"Exception Details Missing\";\n    }\n    if (doc.source_urls) {\n      source_urls = doc.source_urls;\n    } else if (doc.source_url) {\n      source_urls = [doc.source_url];\n    } else {\n      source_urls = [];\n    }\n\n    emit([scraper_module, exception], source_urls);\n  }\n}"},"currently_rescraping":{"map":"function(doc) {\n  if(doc.currently_rescraping) {\n\temit(null, 1);\n  }\n}","reduce":"function (keys, values) {\n\treturn sum(values);\n}"}},"language":"javascript"}
